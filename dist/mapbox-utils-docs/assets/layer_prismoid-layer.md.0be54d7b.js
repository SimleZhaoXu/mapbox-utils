import{M as t}from"./chunks/map-view.3fe756a0.js";import{f as c,p as r,Z as y}from"./chunks/mapbox-utils.esm.43c6f587.js";import{p as D}from"./chunks/data.11da26c8.js";import{a1 as F,h as i,i as B,E as d,N as o}from"./chunks/framework.73679867.js";import"./chunks/mapbox-gl.95dcea97.js";import"./chunks/index.4ed993c7.js";import"./chunks/map_tian.a52cb535.js";const A=o(`<h1 id="柱状图图层-prismoidlayer" tabindex="-1">柱状图图层(PrismoidLayer) <a class="header-anchor" href="#柱状图图层-prismoidlayer" aria-label="Permalink to &quot;柱状图图层(PrismoidLayer)&quot;">​</a></h1><p>在地图上创建柱状图以展示点位数据</p><h2 id="基础用法" tabindex="-1">基础用法 <a class="header-anchor" href="#基础用法" aria-label="Permalink to &quot;基础用法&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 1. 导入</span></span>
<span class="line highlighted"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">PrismoidLayer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mapbox-postting</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 2. 创建PrismoidLayer实例</span></span>
<span class="line highlighted"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> prismoidLayer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PrismoidLayer</span><span style="color:#BABED8;">(options)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 3. 添加到地图</span></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addTo</span><span style="color:#BABED8;">(map) </span><span style="color:#676E95;font-style:italic;">// map为MapBox地图实例</span></span>
<span class="line"></span></code></pre></div><h2 id="options" tabindex="-1">Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;Options&quot;">​</a></h2><p>创建<code>PrismoidLayer</code>实例时需要传入的参数对象，包含以下几个部分：</p><ul><li><p><strong>data：</strong> 点位数据，<a href="https://geojson.org/" target="_blank" rel="noreferrer">GeoJSON</a>格式，类型: <code>FeatureCollection&lt;Point&gt;</code></p></li><li><p><strong>key：</strong> 作为每个点位唯一标识的属性，用来识别需要高亮的点位，默认为<code>id</code></p></li><li><p><strong>style：</strong> 点位基础样式，常用属性如下：</p><table><thead><tr><th style="text-align:center;">属性名</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>fill-extrusion-color</strong></td><td style="text-align:left;">柱状图的颜色（可选，默认值为<code>#000000</code>）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-opacity</strong></td><td style="text-align:left;">柱状图的不透明度（可选，取值范围为 0 ~ 1，默认值为<code>1</code>）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-pattern</strong></td><td style="text-align:left;">柱状图的图案（可选）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-height</strong></td><td style="text-align:left;">柱状图的高度（可选，值 &gt;= 0，默认值为 <code>0</code>，单位：米）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-base</strong></td><td style="text-align:left;">柱状图的底部高度（可选，值 &gt;= 0，默认值为 <code>0</code>，单位：米。值必须小于等于 <code>fill-extrusion-height</code>）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-translate</strong></td><td style="text-align:left;">柱状图的偏移（可选，默认值为 <code>[0, 0]</code>，单位：像素）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-translate-anchor</strong></td><td style="text-align:left;">柱状图偏移的锚点（可选，可选值为 <code>map</code>、<code>viewport</code>，默认为 <code>map</code>）</td></tr></tbody></table></li><li><p><strong>highlightOptions：</strong> 高亮配置，可选（若不设置，则不会触发高亮）。包含以下两个属性：</p><ol><li><p><strong><code>trigger</code></strong>： 高亮的触发方式，值为以下三种：</p><ul><li><p><code>click</code>: 点位被点击时触发高亮</p></li><li><p><code>hover</code>: 鼠标移入点位时触发高亮</p></li><li><p><code>both</code>: 以上两种情况都能触发高亮</p></li></ul></li><li><p><strong><code>style</code></strong>： 高亮样式属性，常用属性如下：</p><table><thead><tr><th style="text-align:center;">属性名</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>fill-extrusion-color</strong></td><td style="text-align:left;">柱状图的颜色（可选，默认继承基础样式）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-opacity</strong></td><td style="text-align:left;">柱状图的不透明度（可选，取值范围为 0 ~ 1，默认继承基础样式）</td></tr><tr><td style="text-align:center;"><strong>fill-extrusion-pattern</strong></td><td style="text-align:left;">柱状图的图案（可选，默认继承基础样式）</td></tr></tbody></table></li></ol></li><li><p><strong>fitBoundsOptions</strong> 可选，在点位添加到地图上时，是否通过调整地图缩放层级及中心点，自动将所有点位展示在视口中，可选值为<code>true</code>、<code>false</code>、<a href="https://docs.mapbox.com/mapbox-gl-js/api/map/#map#fitbounds" target="_blank" rel="noreferrer">FitBoundsOptions</a></p></li></ul><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h2><h3 id="addto" tabindex="-1">addTo() <a class="header-anchor" href="#addto" aria-label="Permalink to &quot;addTo()&quot;">​</a></h3><p>将图层添加到地图实例上</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">map</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Map</span><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> prismoidLayer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PrismoidLayer</span><span style="color:#BABED8;">(options)</span></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addTo</span><span style="color:#BABED8;">(map)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="remove" tabindex="-1">remove() <a class="header-anchor" href="#remove" aria-label="Permalink to &quot;remove()&quot;">​</a></h3><p>将图层及事件监听器从地图上移除</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">():</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">remove</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="setdata" tabindex="-1">setData() <a class="header-anchor" href="#setdata" aria-label="Permalink to &quot;setData()&quot;">​</a></h3><p>设置图层数据，当图层已经添加到地图上时，会更新点位</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">GeoJSON</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">FeatureCollection</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">GeoJSON</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Point</span><span style="color:#89DDFF;">&gt;):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><p>可以通过<code>turf.js</code>内置功能生成<code>FeatureCollection&lt;Point&gt;</code>类型数据</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setData</span><span style="color:#BABED8;">(</span></span>
<span class="line"><span style="color:#BABED8;">  turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">featureCollection</span><span style="color:#BABED8;">([</span></span>
<span class="line"><span style="color:#BABED8;">    turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">point</span><span style="color:#BABED8;">([</span><span style="color:#F78C6C;">105.14453322179482</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">30.50921803813716</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">point</span><span style="color:#BABED8;">([</span><span style="color:#F78C6C;">105.12568252795128</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">30.570884171971322</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">point</span><span style="color:#BABED8;">([</span><span style="color:#F78C6C;">105.12774174353625</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">30.481277054151516</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...point</span></span>
<span class="line"><span style="color:#BABED8;">  ])</span></span>
<span class="line"><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="sethighlight" tabindex="-1">setHighlight() <a class="header-anchor" href="#sethighlight" aria-label="Permalink to &quot;setHighlight()&quot;">​</a></h3><p>该方法可以通过编码的方式将对应点位进行高亮（前提是在创建实例时设置了高亮相关属性，若无高亮相关配置则该方法无效）。</p><ul><li><p>类型</p><p>valOfKey是通过<code>key</code>(在<code>options</code>中设置)来标识唯一点位的属性值， 对应为<code>Feature.properties[key]</code>， 在内部通过该属性寻找对应的点位。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">valOfKey</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHighlight</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="removehighlight" tabindex="-1">removeHighlight() <a class="header-anchor" href="#removehighlight" aria-label="Permalink to &quot;removeHighlight()&quot;">​</a></h3><p>调用该方法清除点位的高亮效果</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">():</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeHighlight</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="easeto" tabindex="-1">easeTo() <a class="header-anchor" href="#easeto" aria-label="Permalink to &quot;easeTo()&quot;">​</a></h3><p>通过该方法可以将地图中心平移到对应的点位</p><ul><li><p>类型</p><p>valOfKey是通过<code>key</code>(在<code>options</code>中设置)来标识唯一点位的属性值， 对应为<code>Feature.properties[key]</code>，在内部通过该属性寻找对应的点位。</p><p><code>options</code>包含<a href="https://docs.mapbox.com/mapbox-gl-js/api/map/#map#easeto" target="_blank" rel="noreferrer">mapboxgl.EaseToOptions</a>中除了<code>center</code>的其他配置项。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">valOfKey</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">options</span><span style="color:#89DDFF;">?:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Omit</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">EaseToOptions</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">center</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 使用默认配置进行平移动</span></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">easeTo</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 设置平移后的缩放层级为9</span></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">easeTo</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">zoom</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">) </span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="flyto" tabindex="-1">flyTo() <a class="header-anchor" href="#flyto" aria-label="Permalink to &quot;flyTo()&quot;">​</a></h3><p>通过该方法可以将地图中心飞行定位到对应的点位</p><ul><li><p>类型</p><p>valOfKey是通过<code>key</code>(在<code>options</code>中设置)来标识唯一点位的属性值， 对应为<code>Feature.properties[key]</code>，在内部通过该属性寻找对应的点位。</p><p><code>options</code>包含<a href="https://docs.mapbox.com/mapbox-gl-js/api/map/#map#flyto" target="_blank" rel="noreferrer">mapboxgl.FlyToOptions</a>中除了<code>center</code>的其他配置项。</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">valOfKey</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">options</span><span style="color:#89DDFF;">?:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Omit</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">FlyToOptions</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">center</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">flyTo</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="fitbounds" tabindex="-1">fitBounds <a class="header-anchor" href="#fitbounds" aria-label="Permalink to &quot;fitBounds&quot;">​</a></h3><p>调用该方法将所有点位集中到视口</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">options</span><span style="color:#89DDFF;">?:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">FitBoundsOptions</span><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fitBounds</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="on" tabindex="-1">on <a class="header-anchor" href="#on" aria-label="Permalink to &quot;on&quot;">​</a></h3><p>注册事件监听器</p><ul><li><p>类型</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">extends</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">EventType</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">&gt;&gt;(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">listener</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ev</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">EventType</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">[</span><span style="color:#FFCB6B;">T</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">void</span></span>
<span class="line"><span style="color:#89DDFF;">):</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// &#39;click&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h2><h3 id="click" tabindex="-1">click <a class="header-anchor" href="#click" aria-label="Permalink to &quot;click&quot;">​</a></h3><p>点位被点击时触发的事件，可以获取被点击点位的坐标及点位数据</p><ul><li><p>callback</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 当前PrismoidLayer实例</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图数据</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">lngLat</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">LngLat</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图位置坐标</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">points</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">&lt;{</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">lngLat</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">LngLat</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}&gt;;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 重叠柱的状图位置</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">originalMapEvent</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">MapLayerMouseEvent</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">EventData</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 原地图图层鼠标点击事件</span></span>
<span class="line"><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">void</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// &#39;click&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 点击后通过坐标进行定位</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">easeTo</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">center</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">lngLat</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="mouseenter" tabindex="-1">mouseenter <a class="header-anchor" href="#mouseenter" aria-label="Permalink to &quot;mouseenter&quot;">​</a></h3><p>鼠标移入点位时触发</p><ul><li><p>callback</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mouseenter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 当前PrismoidLayer实例</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图数据</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">lngLat</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">LngLat</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图位置坐标</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">originalMapEvent</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">MapLayerMouseEvent</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">EventData</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 原地图图层鼠标移入事件</span></span>
<span class="line"><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">void</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mouseenter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// &#39;mouseenter&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="mousemove" tabindex="-1">mousemove <a class="header-anchor" href="#mousemove" aria-label="Permalink to &quot;mousemove&quot;">​</a></h3><p>鼠标在点位上移动时触发</p><ul><li><p>callback</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mousemove</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 当前PrismoidLayer实例</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图数据</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">lngLat</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">LngLat</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 柱状图位置坐标</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">originalMapEvent</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">MapLayerMouseEvent</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">EventData</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 原地图图层鼠标移动事件</span></span>
<span class="line"><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">void</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mousemove</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// &#39;mouseenter&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h3 id="mouseleave" tabindex="-1">mouseleave <a class="header-anchor" href="#mouseleave" aria-label="Permalink to &quot;mouseleave&quot;">​</a></h3><p>鼠标移出点位时触发</p><ul><li><p>callback</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mouseleave</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">this</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 当前PrismoidLayer实例</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">originalMapEvent</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">MapLayerMouseEvent</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">mapboxgl</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">EventData</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 原地图图层鼠标移出事件</span></span>
<span class="line"><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">void</span></span>
<span class="line"></span></code></pre></div></li><li><p>示例</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mouseleave</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">type</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// &#39;mouseleave&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="demo" tabindex="-1">Demo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;Demo&quot;">​</a></h2>`,49),E=o(`<details class="details custom-block"><summary>点击查看代码</summary><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> data </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">featureCollection</span><span style="color:#BABED8;">(points</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">item</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">index</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">turf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">point</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">item</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">PrismoidLayer</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">key</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">radius</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">500</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">fill-extrusion-color</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rgb(16, 146, 153)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">fill-extrusion-height</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">100</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">fill-extrusion-base</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">highlightOptions</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">trigger</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">fill-extrusion-color</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#ffff00</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">fitBoundsOptions</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">padding</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">20</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addTo</span><span style="color:#BABED8;">(map)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">prismoidLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#BABED8;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">easeTo</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> center</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">e</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">lngLat</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div></details>`,1),k=JSON.parse('{"title":"柱状图图层(PrismoidLayer)","description":"","frontmatter":{},"headers":[],"relativePath":"layer/prismoid-layer.md"}'),g={name:"layer/prismoid-layer.md"},L=Object.assign(g,{setup(h){let a,s;const p=c(D.map((n,l)=>r(n,{id:l+1}))),e=n=>{a=n,a.setPitch(60),s=new y({key:"id",data:p,radius:500,steps:4,style:{"fill-extrusion-color":"rgb(16, 146, 153)","fill-extrusion-height":["*",["get","id"],100],"fill-extrusion-base":0},highlightOptions:{trigger:"click",style:{"fill-extrusion-color":"#ffff00"}},fitBoundsOptions:{padding:20}}),s.addTo(a),s.on("click",l=>{a.easeTo({center:l.lngLat})})};return F(()=>{s==null||s.remove()}),(n,l)=>(i(),B("div",null,[A,d(t,{class:"map-view",style:{height:"600px","border-radius":"5px",overflow:"hidden"},onLoad:e}),E]))}});export{k as __pageData,L as default};
