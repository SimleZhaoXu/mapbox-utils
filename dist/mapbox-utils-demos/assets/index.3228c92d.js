import{b as f,j as g,M as B,q as O}from"./mapbox-utils.esm.1d7eedb7.js";import{i as F,a as _,d as v}from"./index.2419e32d.js";import{r as D,b as E}from"./sn_border.2879f07a.js";import{_ as b,d as h,r as k,m as P,g as x,c as A,h as C,e as I,o as M,O as c}from"./index.3f3ae0c4.js";const y={anchor:"center",color:"#3FB1CE",element:"default",offset:[0,0],pitchAlignment:"auto",rotation:0,rotationAlignment:"auto",scale:1},w={multiple:!0,removeOnClick:!1,enableMarkerOptions:"0",markerOptions:{anchor:"center",color:"#3FB1CE",element:"default",offset:[0,0],pitchAlignment:"auto",rotation:0,rotationAlignment:"auto",scale:1}},d=localStorage.getItem("PointPickerOptions"),n=d?JSON.parse(d):w,N=()=>{const r=Object.create(null);if(r.multiple=n.multiple,r.removeOnClick=n.removeOnClick,n.enableMarkerOptions==="1"){const a=Object.create(null);Object.keys(n.markerOptions).forEach(t=>{JSON.stringify(n.markerOptions[t])!==JSON.stringify(y[t])&&(a[t]=n.markerOptions[t])}),Object.keys(a).length>0&&(r.markerOptions=a)}return r};const S={class:"point-picker-gui"},T=h({__name:"index",setup(r){const a=k();P(()=>{var o;(o=a.value)==null||o.appendChild(i.domElement),i.domElement.classList.add("custom-gui")});let t,e;const m=o=>{t=o,l()},l=()=>{if(!t){c.warning("\u8BF7\u7B49\u5F85\u5730\u56FE\u52A0\u8F7D\uFF01");return}e==null||e.remove(),e=new O({...N()}),e.addTo(t),e.on("click-point",o=>{c.success(`\u70B9\u4F4D\u88AB\u70B9\u51FB, ${o.point}`)}),e.on("get-point",o=>{c.success(`\u83B7\u53D6\u70B9\u4F4D, \u5F53\u524D\u83B7\u53D6\u70B9\u4F4D${o.point}`)}),e.on("remove-point",o=>{c.success(`\u5220\u9664\u70B9\u4F4D, \u5F53\u524D\u5220\u9664\u70B9\u4F4D${o.point}`)})};x(()=>{i.destroy(),e==null||e.remove(),t.remove(),t=void 0,e=void 0});const p=()=>{localStorage.setItem("PointPickerOptions",JSON.stringify(n)),l()},i=new F.GUI({name:"point-picker",autoPlace:!1,width:400,closeOnTop:!0});_(i,n,v,p);const u={addTo:()=>{e.addTo(t)},remove:()=>{e==null||e.remove()},removePoints:()=>{e.removePoints()},getPoints:()=>{console.log(e.getPoints())},setPoint:()=>{const o=D(1,{bbox:f(E)});e.setPoint(g(o)[0])}},s=i.addFolder("API");return s.open(),s.add(u,"addTo").name("\u6DFB\u52A0\u5230\u5730\u56FE---addTo(map)"),s.add(u,"remove").name("\u4ECE\u5730\u56FE\u4E0A\u79FB\u9664---remove()"),s.add(u,"removePoints").name("\u6E05\u9664\u5DF2\u83B7\u53D6\u70B9\u4F4D---clear()"),s.add(u,"getPoints").name("\u83B7\u53D6\u5DF2\u83B7\u53D6\u70B9\u4F4D---getLine()"),s.add(u,"setPoint").name("\u8BBE\u7F6E\u70B9\u4F4D---setPoint(point)"),(o,U)=>(M(),A("div",S,[C(B,{onLoad:m}),I("div",{ref_key:"container",ref:a,class:"gui-container"},null,512)]))}});var $=b(T,[["__scopeId","data-v-f8ab8722"]]);export{$ as default};
