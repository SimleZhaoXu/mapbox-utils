import{_ as v,d as C,r as M,g as N,c as m,h as d,e as w,w as c,F as D,a as F,i as O,o as _,j as i,b as B,t as L,k as R,u as A}from"./index.3f3ae0c4.js";import{W as T,b as x,s as j,e as P}from"./terraformer-wkt-parser.cdbff7b6.js";import{L as r,M as S}from"./mapbox-utils.esm.1d7eedb7.js";function f(b,u){const n=document.createElement("a"),e=document.querySelector("body");n.href=window.URL.createObjectURL(b),n.download=u,n.style.display="none",e&&e.appendChild(n),n.click(),e&&e.removeChild(n),window.URL.revokeObjectURL(n.href)}const W={class:"geometry-picker"},Y={class:"button-box"},U=C({__name:"index",setup(b){const u=R(),n=A(),e=new r({multiple:!0});let s;const g=a=>{s=a;const{lng:t,lat:o}=u.query;t&&!isNaN(parseFloat(t))&&o&&!isNaN(parseFloat(o))&&s.setCenter([parseFloat(t),parseFloat(o)]),e.addTo(s),s.on("moveend",l=>{const[y,k]=s.getCenter().toArray();n.replace({path:u.path,query:{lng:y,lat:k}})})},h=M([{label:"NONE",handler:()=>{e.changeMode(r.MODE_TYPE.NONE)}},{label:"\u70B9",handler:()=>{e.changeMode(r.MODE_TYPE.DRAW_POINT)}},{label:"\u7EBF",handler:()=>{e.changeMode(r.MODE_TYPE.DRAW_LINE)}},{label:"\u591A\u8FB9\u5F62",handler:()=>{e.changeMode(r.MODE_TYPE.DRAW_POLYGON)}},{label:"\u77E9\u5F62",handler:()=>{e.changeMode(r.MODE_TYPE.DRAW_RECT)}},{label:"\u5706",handler:()=>{e.changeMode(r.MODE_TYPE.DRAW_CIRCLE)}},{label:"\u6E05\u9664",handler:()=>{e.clear()}},{label:"\u83B7\u53D6(geojson)",handler:()=>{const a=e.getAll().map(t=>t.feature);!a.length||f(new Blob([JSON.stringify(a)],{type:"application/json"}),"features.json")}},{label:"\u83B7\u53D6(wkt)",handler:()=>{const a=e.getAll().map(t=>T.convert(t.feature.geometry));!a.length||f(new Blob([JSON.stringify(a)],{type:"application/json"}),"geometries.json")}}]),E={blank:x,satellite:j,electronic:P},p=a=>{s.setStyle(E[a])};return N(()=>{e.remove()}),(a,t)=>{const o=O("el-button");return _(),m("div",W,[d(S,{onLoad:g}),w("div",Y,[d(o,{onClick:t[0]||(t[0]=l=>p("satellite"))},{default:c(()=>[i("\u536B\u661F\u5F71\u50CF")]),_:1}),d(o,{onClick:t[1]||(t[1]=l=>p("electronic"))},{default:c(()=>[i("\u7535\u5B50\u5730\u56FE")]),_:1}),d(o,{onClick:t[2]||(t[2]=l=>p("blank"))},{default:c(()=>[i("\u7A7A\u767D")]),_:1}),(_(!0),m(D,null,F(h.value,l=>(_(),B(o,{key:l.label,onClick:l.handler},{default:c(()=>[i(L(l.label),1)]),_:2},1032,["onClick"]))),128))])])}}});var $=v(U,[["__scopeId","data-v-437e7faa"]]);export{$ as default};
